<?xml version="1.0" ?>
<mujoco model="panda_table_cube">
    <compiler angle="radian" inertiafromgeom="true" />
    <option timestep="0.001" gravity="0 0 -9.81" />
    
    <default>
        <default class="panda">
            <joint type="hinge" damping="0.5" armature="0.1" />
            <geom friction="1 1 1" type="capsule" solimp="0.999 0.999 0.01" solref="0.001 0.0001" />
        </default>
        <default class="gripper">
            <joint type="slide" damping="50" armature="0.01" />
            <geom friction="0.8 0.8 0.4" type="capsule" />
        </default>
        <default class="table">
            <geom type="box" friction="1 1 0.1" />
        </default>
    </default>
    
    <asset>
        <!-- Panda model from DeepMind Menagerie -->
    </asset>
    
    <worldbody>
        <!-- Table -->
        <body name="table" pos="0 0 0">
            <geom class="table" name="table_top" pos="0 0 0.4" size="0.5 0.5 0.02" />
            <geom class="table" name="table_leg1" pos="0.4 0.4 0.2" size="0.02 0.02 0.2" />
            <geom class="table" name="table_leg2" pos="-0.4 0.4 0.2" size="0.02 0.02 0.2" />
            <geom class="table" name="table_leg3" pos="0.4 -0.4 0.2" size="0.02 0.02 0.2" />
            <geom class="table" name="table_leg4" pos="-0.4 -0.4 0.2" size="0.02 0.02 0.2" />
        </body>
        
        <!-- Panda Arm (simplified 7-DOF) -->
        <body name="panda_base" pos="0 0 0.42">
            <!-- Joint 1 -->
            <body name="panda_link1" pos="0 0 0">
                <joint name="panda_joint1" class="panda" axis="0 0 1" range="-3.07 3.07" />
                <geom name="panda_link1_geom" class="panda" pos="0 0 0.1" size="0.05 0.1" />
                
                <!-- Joint 2 -->
                <body name="panda_link2" pos="0 0 0.333">
                    <joint name="panda_joint2" class="panda" axis="0 1 0" range="-1.57 1.57" />
                    <geom name="panda_link2_geom" class="panda" pos="0 0 0.1" size="0.05 0.1" />
                    
                    <!-- Joint 3 -->
                    <body name="panda_link3" pos="0 0 0.316">
                        <joint name="panda_joint3" class="panda" axis="0 0 1" range="-3.07 3.07" />
                        <geom name="panda_link3_geom" class="panda" pos="0 0 0.08" size="0.04 0.08" />
                        
                        <!-- Joint 4 -->
                        <body name="panda_link4" pos="0.0825 0 0.384">
                            <joint name="panda_joint4" class="panda" axis="0 1 0" range="-3.07 0" />
                            <geom name="panda_link4_geom" class="panda" pos="0 0 0.08" size="0.04 0.08" />
                            
                            <!-- Joint 5 -->
                            <body name="panda_link5" pos="-0.0825 0 0.384">
                                <joint name="panda_joint5" class="panda" axis="0 0 1" range="-3.07 3.07" />
                                <geom name="panda_link5_geom" class="panda" pos="0 0 0.08" size="0.04 0.08" />
                                
                                <!-- Joint 6 -->
                                <body name="panda_link6" pos="0 0 0.384">
                                    <joint name="panda_joint6" class="panda" axis="0 1 0" range="-0.0175 3.75" />
                                    <geom name="panda_link6_geom" class="panda" pos="0 0 0.08" size="0.04 0.08" />
                                    
                                    <!-- Joint 7 (wrist) -->
                                    <body name="panda_link7" pos="0 0 0.107">
                                        <joint name="panda_joint7" class="panda" axis="0 0 1" range="-3.07 3.07" />
                                        <geom name="panda_link7_geom" class="panda" pos="0 0 0.07" size="0.03 0.07" />
                                        
                                        <!-- End effector / gripper frame -->
                                        <body name="panda_hand" pos="0 0 0.1034">
                                            <geom name="panda_hand_geom" type="box" size="0.03 0.03 0.03" friction="1 1 1" />
                                            
                                            <!-- Left finger -->
                                            <body name="panda_finger_left" pos="0.02 0 0.05">
                                                <joint name="panda_finger_left_joint" class="gripper" axis="1 0 0" range="0 0.04" />
                                                <geom name="panda_finger_left_geom" class="gripper" pos="0 0 0.02" size="0.01 0.02" />
                                            </body>
                                            
                                            <!-- Right finger -->
                                            <body name="panda_finger_right" pos="-0.02 0 0.05">
                                                <joint name="panda_finger_right_joint" class="gripper" axis="1 0 0" range="0 0.04" />
                                                <geom name="panda_finger_right_geom" class="gripper" pos="0 0 0.02" size="0.01 0.02" />
                                            </body>
                                        </body>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
        
        <!-- Free cube on table -->
        <body name="cube" pos="0.2 0.2 0.45" >
            <inertial pos="0 0 0" mass="0.5" diaginv="1 1 1" />
            <geom name="cube_geom" type="box" size="0.04 0.04 0.04" 
                  friction="1 1 0.1" solref="0.001 0.0001" solimp="0.999 0.999 0.01" />
            <joint name="cube_x" type="slide" axis="1 0 0" damping="0.1" />
            <joint name="cube_y" type="slide" axis="0 1 0" damping="0.1" />
            <joint name="cube_z" type="slide" axis="0 0 1" damping="0.1" />
            <joint name="cube_rotx" type="ball" damping="0.05" />
        </body>
    </worldbody>
    
    <actuator>
        <!-- Joint motors -->
        <motor name="panda_motor1" joint="panda_joint1" ctrlrange="-87 87" />
        <motor name="panda_motor2" joint="panda_joint2" ctrlrange="-87 87" />
        <motor name="panda_motor3" joint="panda_joint3" ctrlrange="-87 87" />
        <motor name="panda_motor4" joint="panda_joint4" ctrlrange="-87 87" />
        <motor name="panda_motor5" joint="panda_joint5" ctrlrange="-12 12" />
        <motor name="panda_motor6" joint="panda_joint6" ctrlrange="-120 120" />
        <motor name="panda_motor7" joint="panda_joint7" ctrlrange="-120 120" />
        
        <!-- Gripper motors -->
        <motor name="panda_gripper_left" joint="panda_finger_left_joint" ctrlrange="0 10" />
        <motor name="panda_gripper_right" joint="panda_finger_right_joint" ctrlrange="0 10" />
    </actuator>
    
</mujoco>